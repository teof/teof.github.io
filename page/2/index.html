<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>teof的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="北航09级研究生。擅长手游研发，历任双端核心开发、项目主程、创业公司技术合伙人。">
<meta name="keywords" content="erlang,html5,开发者,程序猿,编程,代码,开源">
<meta property="og:type" content="website">
<meta property="og:title" content="teof的博客">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="teof的博客">
<meta property="og:description" content="北航09级研究生。擅长手游研发，历任双端核心开发、项目主程、创业公司技术合伙人。">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="teof的博客">
<meta name="twitter:description" content="北航09级研究生。擅长手游研发，历任双端核心开发、项目主程、创业公司技术合伙人。">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">teof的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">不想继续废柴</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-1010-1014" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/20/1010-1014/" class="article-date">
  <time datetime="2018-06-20T15:55:56.000Z" itemprop="datePublished">2018-06-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/js刷题/">js刷题</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/20/1010-1014/">1010-1014</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近很忙。</p>
<h3 id="10-【编程题】-月饼-25"><a href="#10-【编程题】-月饼-25" class="headerlink" title="10.【编程题】 月饼 (25)"></a><strong>10.【编程题】 月饼 (25)</strong></h3><p>题目描述</p>
<pre><code>月饼是中国人在中秋佳节时吃的一种传统食品，不同地区有许多不同风味的月饼。现给定所有种类月饼的库存量、总售价、以及市场的最大需

求量，请你计算可以获得的最大收益是多少。

注意：销售时允许取出一部分库存。样例给出的情形是这样的：假如我们有3种月饼，其库存量分别为18、15、10万吨，总售价分别为75、

72、45亿元。如果市场的最大需求量只有20万吨，那么我们最大收益策略应该是卖出全部15万吨第2种月饼、以及5万吨第3种月饼，获得

72 + 45/2 = 94.5（亿元）。
</code></pre><p>输入描述:</p>
<pre><code>每个输入包含1个测试用例。每个测试用例先给出一个不超过1000的正整数N表示月饼的种类数、以及不超过500（以万吨为单位）的正整数

D表示市场最大需求量。随后一行给出N个正数表示每种月饼的库存量（以万吨为单位）；最后一行给出N个正数表示每种月饼的总售价（以亿

元为单位）。数字间以空格分隔。
</code></pre><p>输出描述:</p>
<pre><code>对每组测试用例，在一行中输出最大收益，以亿元为单位并精确到小数点后2位。
</code></pre><p>输入例子:</p>
<pre><code>3 20

18 15 10

75 72 45
</code></pre><p>输出例子:</p>
<pre><code>94.50
</code></pre><p><strong>代码如下：</strong></p>
<pre><code>var line1 = readline();
var line2 = readline();
var line3 = readline();

var lines1 = line1.split(&apos; &apos;);
var category = lines1[0];
var d = lines1[1];

var lines2 = line2.split(&apos; &apos;);
var lines2_int = lines2.map(function (item,index,input) {
return parseInt(item);
})

var lines3 = line3.split(&apos; &apos;);
var lines3_int = lines3.map(function (item,index,input) {
return parseInt(item);
})

var ratio = new Array(); //单价比

for(var i = 0; i &lt; category; i++)
{
var max_save = lines2_int[i];
var all_price = lines3_int[i];
ratio.push([i, all_price / max_save]);
}

var compare = function (x, y) {
if(x[1] &gt; y[1])
return -1;
return 1;
}

ratio.sort(compare);

var result = 0;

for(var i = 0; i &lt; category; i++)
{
var idx = ratio[i][0];
var r = ratio[i][1];
if(d &lt;= lines2_int[idx])
{
result += r * d;
break;
}
d -= lines2_int[idx];
result += lines3_int[idx];
}

function toDecimal2(x) {
var f = parseFloat(x);
var f = Math.round(x*100)/100;
var s = f.toString();
var rs = s.indexOf(&apos;.&apos;);
if (rs &lt; 0) {
rs = s.length;
s += &apos;.&apos;;
}
while (s.length &lt;= rs + 2) {
s += &apos;0&apos;;
}
return s;
}

console.log(toDecimal2(result));
</code></pre><h3 id="11-【编程题】-个位数统计-15"><a href="#11-【编程题】-个位数统计-15" class="headerlink" title="11.【编程题】 个位数统计 (15)"></a><strong>11.【编程题】 个位数统计 (15)</strong></h3><p>题目描述</p>
<pre><code>给定一个k位整数N = dk-1*10k-1 + ... + d1*101 + d0 (0&lt;=di&lt;=9, i=0,...,k-1, dk-1&gt;0)，请编写程序统计每种不同的个位数字出现的次数。例如：给定N = 100311，则有2个0，3个1，和1个3。
</code></pre><p>输入描述:</p>
<pre><code>每个输入包含1个测试用例，即一个不超过1000位的正整数N。
</code></pre><p>输出描述:</p>
<pre><code>对N中每一种不同的个位数字，以D:M的格式在一行中输出该位数字D及其在N中出现的次数M。要求按D的升序输出。
</code></pre><p>输入例子:</p>
<pre><code>100311
</code></pre><p>输出例子:</p>
<pre><code>0:2

1:3

3:1
</code></pre><p><strong>代码如下：</strong></p>
<pre><code>var line = readline();

var stats = new Array();

var value = 0;
for(var i = 0; i &lt; line.length; i++)
{
value = parseInt(line[i]);
if(stats[value] !== undefined)
stats[value] = stats[value] + 1;
else
stats[value] = 1;
}

for(i = 0; i &lt; stats.length; i++)
{
if(stats[i] == undefined)
continue;
console.log(i + &quot;:&quot; + stats[i]);
}
</code></pre><h3 id="12-【编程题】-D进制的A-B-20"><a href="#12-【编程题】-D进制的A-B-20" class="headerlink" title="12.【编程题】 D进制的A+B (20)"></a><strong>12.【编程题】 D进制的A+B (20)</strong></h3><p>题目描述</p>
<pre><code>输入两个非负10进制整数A和B(&lt;=230-1)，输出A+B的D (1 &lt; D &lt;= 10)进制数。
</code></pre><p>输入描述:</p>
<pre><code>输入在一行中依次给出3个整数A、B和D。
</code></pre><p>输出描述:</p>
<pre><code>输出A+B的D进制数。
</code></pre><p>输入例子:</p>
<pre><code>123 456 8
</code></pre><p>输出例子:</p>
<pre><code>1103
</code></pre><p><strong>代码如下：</strong></p>
<pre><code>var line = readline();
var lines = line.split(&apos; &apos;);

var a = parseInt(lines[0]);
var b = parseInt(lines[1]);
var d = parseInt(lines[2]);
var sum = a + b;

var str = (a + b).toString();
var result = &quot;&quot;;
var acc = d;

var cnt = 1;
while (true)
{
if(acc &gt; (a+b))
break;
cnt++;
acc *= d;
}

for(var i = cnt; i &gt;= 0; i--)
{
var base = Math.pow(d, i);

if(sum &gt;= base)
{
result += Math.floor(sum / base);
sum = sum % base;
}
else
{
if(result == &quot;&quot;)
continue;
result += 0;
}
}

console.log(result);
</code></pre><h3 id="13-【编程题】-组个最小数-20"><a href="#13-【编程题】-组个最小数-20" class="headerlink" title="13.【编程题】 组个最小数 (20)"></a><strong>13.【编程题】 组个最小数 (20)</strong></h3><p>题目描述</p>
<pre><code>给定数字0-9各若干个。你可以以任意顺序排列这些数字，但必须全部使用。目标是使得最后得到的数尽可能小（注意0不能做首位）。例如：

给定两个0，两个1，三个5，一个8，我们得到的最小的数就是10015558。

现给定数字，请编写程序输出能够组成的最小的数。
</code></pre><p>输入描述:</p>
<pre><code>每个输入包含1个测试用例。每个测试用例在一行中给出10个非负整数，顺序表示我们拥有数字0、数字1、……数字9的个数。整数间用一个空

格分隔。10个数字的总个数不超过50，且至少拥有1个非0的数字。
</code></pre><p>输出描述:</p>
<pre><code>在一行中输出能够组成的最小的数。
</code></pre><p>输入例子:</p>
<pre><code>2 2 0 0 0 3 0 0 1 0
</code></pre><p>输出例子:</p>
<pre><code>10015558
</code></pre><p><strong>代码如下：</strong></p>
<pre><code>var line = readline();
var lines = line.split(&apos; &apos;);
var lines_int = lines.map(function(item, index,input){ return input[index] = parseInt(item);})

var nums = new Array();
for(var i = 0; i &lt; lines.length; i++)
{
nums[i] = lines[i];
}

function repeat_str(str, num) {
if(num &lt;= 0)
return &quot;&quot;;
return str.toString().repeat(num);
}

var result = &quot;&quot;;
for(var i = 1; i &lt; lines_int.length; i++)
{
if(lines_int[i] == 0)
continue;

if(result == &quot;&quot;)
{
result = i + repeat_str(0, lines_int[0]) + repeat_str(i, lines_int[i] - 1);
}
else
{
result += repeat_str(i, lines_int[i]);
}
}

console.log(result);
</code></pre><h3 id="14-【编程题】-科学计数法-20"><a href="#14-【编程题】-科学计数法-20" class="headerlink" title="14.【编程题】 科学计数法 (20)"></a><strong>14.【编程题】 科学计数法 (20)</strong></h3><p>题目描述</p>
<pre><code>科学计数法是科学家用来表示很大或很小的数字的一种方便的方法，其满足正则表达式[+-][1-9]&quot;.&quot;[0-9]+E[+-][0-9]+，即数字的整数部分

只有1位，小数部分至少有1位，该数字及其指数部分的正负号即使对正数也必定明确给出。

现以科学计数法的格式给出实数A，请编写程序按普通数字表示法输出A，并保证所有有效位都被保留。
</code></pre><p>输入描述:</p>
<pre><code>每个输入包含1个测试用例，即一个以科学计数法表示的实数A。该数字的存储长度不超过9999字节，且其指数的绝对值不超过9999。
</code></pre><p>输出描述:</p>
<pre><code>对每个测试用例，在一行中按普通数字表示法输出A，并保证所有有效位都被保留，包括末尾的0。
</code></pre><p>输入例子:</p>
<pre><code>+1.23400E-03
</code></pre><p>输出例子:</p>
<pre><code>0.00123400
</code></pre><p><strong>代码如下：</strong></p>
<pre><code>var line = readline();

var pow = &quot;&quot;;
var base_str = &quot;&quot;;

var result = &quot;&quot;;

for(var i = 1; i &lt; line.length; i++)
{
if(line[i] !== &quot;E&quot;)
{
base_str += line[i];
continue;
}

var pow_str = line.slice(i+1, line.length);
var pow_int = parseInt(pow_str);
if(pow_int == 0)
{
result = base_str;
break;
}
if(pow_int &gt; 0)
{
result = base_str[0];
var cnt = 1;
while (pow_int &gt; 0)
{
if(cnt + 1 &lt; base_str.length)
{
result += base_str[cnt + 1];
cnt++;
pow_int--;
}
else
{
result += &apos;0&apos;.repeat(pow_int);
break;
}
}
}
else
{
result = &quot;0.&quot; + &apos;0&apos;.repeat(-pow_int-1) + base_str[0] + base_str.slice(2, base_str.length);
}

break;
}

if(line[0] == &quot;-&quot;)
result = &quot;-&quot; + result;

console.log(result);
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/20/1010-1014/" data-id="cjokv5nn4000344rjh2q1nx44" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-1006-1009" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/14/1006-1009/" class="article-date">
  <time datetime="2018-06-14T12:25:22.000Z" itemprop="datePublished">2018-06-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/js刷题/">js刷题</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/14/1006-1009/">1006-1009</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="6-【编程题】部分A-B-15"><a href="#6-【编程题】部分A-B-15" class="headerlink" title="6.【编程题】部分A+B (15)"></a><strong>6.【编程题】部分A+B (15)</strong></h3><p>题目描述</p>
<pre><code>正整数A的“DA（为1位整数）部分”定义为由A中所有DA组成的新整数PA。例如：给定A = 3862767，DA = 6，则A的“6部分”PA是66，因为A中有2个6。

现给定A、DA、B、DB，请编写程序计算PA + PB。
</code></pre><p>输入描述:</p>
<pre><code>输入在一行中依次给出A、DA、B、DB，中间以空格分隔，其中0 &lt; A, B &lt; 1010。
</code></pre><p>输出描述:</p>
<pre><code>在一行中输出PA + PB的值。
</code></pre><p>输入例子:</p>
<pre><code>3862767 6 13530293 3
</code></pre><p>输出例子:</p>
<pre><code>399
</code></pre><p><strong>代码如下：</strong></p>
<pre><code>var line = readline();
var lines = line.split(&apos; &apos;);

var a = parseInt(lines[0]);
var da = parseInt(lines[1]);
var b = parseInt(lines[2]);
var db = parseInt(lines[3]);

var cnta = 0;
var cntb = 0;

while (a != 0)
{
if((a % 10) == da)
cnta = cnta * 10 + (a % 10);

a = Math.floor(a / 10);
}

while (b != 0)
{
if((b % 10) == db)
cntb = cntb * 10 + (b % 10);

b = Math.floor(b / 10);
}

console.log(cnta + cntb);
</code></pre><h3 id="7-【编程题】-A除以B-20"><a href="#7-【编程题】-A除以B-20" class="headerlink" title="7.【编程题】 A除以B (20)"></a><strong>7.【编程题】 A除以B (20)</strong></h3><p>题目描述</p>
<pre><code>本题要求计算A/B，其中A是不超过1000位的正整数，B是1位正整数。你需要输出商数Q和余数R，使得A = B * Q + R成立。
</code></pre><p>输入描述:</p>
<pre><code>输入在1行中依次给出A和B，中间以1空格分隔。
</code></pre><p>输出描述:</p>
<pre><code>在1行中依次输出Q和R，中间以1空格分隔。
</code></pre><p>输入例子:</p>
<pre><code>123456789050987654321 7
</code></pre><p>输出例子:</p>
<pre><code>17636684150141093474 3
</code></pre><p><strong>代码如下：</strong></p>
<pre><code>//大整数除法(除数为小整数。如果除数也是大整数的话，需要用字符串的表达形式来处理相关逻辑了，本质是一样的，都是模拟除法公式）
var line = readline();
var lines = line.split(&apos; &apos;);

var a = lines[0];
var b = parseInt(lines[1]);

var sum = 0;
var n = 0;

var result = &quot;&quot;;

for(var i = 0; i &lt; a.length; i++)
{
var n = a.charCodeAt(i) - 48; //得到数字

sum = sum * 10 + n;

if(sum &gt;= b)
{
result += Math.floor(sum / b);
sum = sum % b;
}
else
{
if(result == &quot;&quot;)
continue;
result += 0;
}
}

console.log(result, sum);
</code></pre><h3 id="8-【编程题】-锤子剪刀布-20"><a href="#8-【编程题】-锤子剪刀布-20" class="headerlink" title="8.【编程题】 锤子剪刀布 (20)"></a><strong>8.【编程题】 锤子剪刀布 (20)</strong></h3><p>题目描述</p>
<pre><code>大家应该都会玩“锤子剪刀布”的游戏：

现给出两人的交锋记录，请统计双方的胜、平、负次数，并且给出双方分别出什么手势的胜算最大。
</code></pre><p>输入描述:</p>
<pre><code>输入第1行给出正整数N（&lt;=105），即双方交锋的次数。随后N行，每行给出一次交锋的信息，即甲、乙双方同时给出的的手势。C代表“锤子”、J代表“剪刀”、B代

表“布”，第1个字母代表甲方，第2个代表乙方，中间有1个空格。
</code></pre><p>输出描述:</p>
<pre><code>输出第1、2行分别给出甲、乙的胜、平、负次数，数字间以1个空格分隔。第3行给出两个字母，分别代表甲、乙获胜次数最多的手势，中间有1个空格。如果解不唯

一，则输出按字母序最小的解。
</code></pre><p>输入例子:</p>
<pre><code>10

C J

J B

C B

B B

B C

C C

C B

J B

B C

J J
</code></pre><p>输出例子:</p>
<pre><code>5 3 2

2 3 5

B B
</code></pre><p><strong>代码如下：</strong></p>
<pre><code>var head_line = readline();

var a_win = 0;
var draw = 0;
var a_lose = 0;

var a_win_array = {&quot;C&quot;:0, &quot;J&quot;:0, &quot;B&quot;:0};
var b_win_array = {&quot;C&quot;:0, &quot;J&quot;:0, &quot;B&quot;:0};

var result = &quot;&quot;;

//返回0表示平局，1表示a赢，-1表示a输
var judgeWin = function(ap, bp)
{
if(ap == bp)
return 0;
if(ap == &quot;C&quot; &amp;&amp; bp == &quot;J&quot;)
return 1;
if(ap == &quot;J&quot; &amp;&amp; bp == &quot;B&quot;)
return 1;
if(ap == &quot;B&quot; &amp;&amp; bp == &quot;C&quot;)
return 1;

return -1;
}

while(line=readline())
{
var lines = line.split(&apos; &apos;);
var a = lines[0];
var b = lines[1];

switch(judgeWin(a, b))
{
case 0:
draw ++;
break;
case 1:
a_win ++;
a_win_array[a] = a_win_array[a] + 1;
break;
case -1:
a_lose ++;
b_win_array[b] = b_win_array[b] + 1;
break;
}
}

console.log(a_win, draw, a_lose);
console.log(a_lose, draw, a_win);

var str = &quot;&quot;;
if(a_win_array[&quot;B&quot;] &gt;= a_win_array[&quot;J&quot;] &amp;&amp; a_win_array[&quot;B&quot;] &gt;= a_win_array[&quot;C&quot;])
str += &quot;B&quot;;
else if(a_win_array[&quot;C&quot;] &gt;= a_win_array[&quot;B&quot;] &amp;&amp; a_win_array[&quot;C&quot;] &gt;= a_win_array[&quot;J&quot;])
str += &quot;C&quot;;
else
str += &quot;J&quot;;

if(b_win_array[&quot;B&quot;] &gt;= b_win_array[&quot;J&quot;] &amp;&amp; b_win_array[&quot;B&quot;] &gt;= b_win_array[&quot;C&quot;])
str += &quot; B&quot;;
else if(b_win_array[&quot;C&quot;] &gt;= b_win_array[&quot;B&quot;] &amp;&amp; b_win_array[&quot;C&quot;] &gt;= b_win_array[&quot;J&quot;])
str += &quot; C&quot;;
else
str += &quot; J&quot;;

console.log(str);
</code></pre><h3 id="9-【编程题】-数字黑洞-20"><a href="#9-【编程题】-数字黑洞-20" class="headerlink" title="9.【编程题】 数字黑洞 (20)"></a><strong>9.【编程题】 数字黑洞 (20)</strong></h3><p>题目描述</p>
<pre><code>给定任一个各位数字不完全相同的4位正整数，如果我们先把4个数字按非递增排序，再按非递减排序，然后用第1个数字减第2个数字，将得到
一个新的数字。一直重复这样做，我们很快会停在有“数字黑洞”之称的6174，这个神奇的数字也叫Kaprekar常数。

例如，我们从6767开始，将得到

7766 - 6677 = 1089
9810 - 0189 = 9621
9621 - 1269 = 8352
8532 - 2358 = 6174
7641 - 1467 = 6174
... ...

现给定任意4位正整数，请编写程序演示到达黑洞的过程。
</code></pre><p>输入描述:</p>
<pre><code>输入给出一个(0, 10000)区间内的正整数N。
</code></pre><p>输出描述:</p>
<pre><code>如果N的4位数字全相等，则在一行内输出“N - N = 0000”；否则将计算的每一步在一行内输出，直到6174作为差出现，输出格式见样例,每行中间没有空行。注意每个数字按4位数格
式输出。
</code></pre><p>输入例子:</p>
<pre><code>6767
</code></pre><p>输出例子:</p>
<pre><code>7766 - 6677 = 1089
9810 - 0189 = 9621
9621 - 1269 = 8352
8532 - 2358 = 6174
</code></pre><p><strong>代码如下：</strong></p>
<pre><code>//有些特殊情况没有注意或者题目就没有说清.此处已通.以代码为准即可知道潜规则
var line = readline();

line = &apos;0&apos;.repeat(4 - line.length) + line;

var all_same = true;
for(var i = 1; i &lt; line.length; i++)
{
if(line[i] == line[0])
continue;
all_same = false;
break;
}

if(all_same)
{
console.log(line + &quot; - &quot; + line + &quot; = 0000&quot;);
}
else {
var num = parseInt(line);

var num_array = new Array(0, 0, 0, 0);
var result = 0;
var array_idx = 0;

//source_int输入的整数，pos_num需要占据的非小数的位置，比如4，则数字1需要变成0001进行返回
var format = function (source_int, pos_num) {
if (pos_num == undefined)
pos_num = 4;

source_str = source_int.toString();
if (source_str.length &gt;= pos_num)
return source_str;

return &apos;0&apos;.repeat(pos_num - source_str.length) + source_str;
}

var ascnum = 0;
var desnum = 0;

while (true) {
while (num != 0) {
num_array[array_idx] = num % 10;
num = Math.floor(num / 10);
array_idx++;
}

array_idx = 0;
num_array = num_array.sort();

ascnum = num_array[3] * 1000 + num_array[2] * 100 + num_array[1] * 10 + num_array[0];
desnum = num_array[0] * 1000 + num_array[1] * 100 + num_array[2] * 10 + num_array[3];
num = ascnum - desnum;

console.log(format(ascnum) + &quot; - &quot; + format(desnum) + &quot; = &quot; + format(num));

if (num == 6174)
break;
}
}
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/14/1006-1009/" data-id="cjokv5nof000p44rjq02tvq2d" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-1004-1005" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/14/1004-1005/" class="article-date">
  <time datetime="2018-06-13T17:05:48.000Z" itemprop="datePublished">2018-06-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/js刷题/">js刷题</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/14/1004-1005/">1004-1005</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li><strong>5.【编程题】福尔摩斯的约会 (20)</strong></li>
</ul>
<p>题目描述</p>
<pre><code>大侦探福尔摩斯接到一张奇怪的字条：“我们约会吧！ 3485djDkxh4hhGE 2984akDfkkkkggEdsb s&amp;hgsfdk d&amp;Hyscvnm”。大侦探很

快就明白了，字条上奇怪的乱码实际上就是约会的时间“星期四 14:04”，因为前面两字符串中第1对相同的大写英文字母（大小写有区分）是

第4个字母&apos;D&apos;，代表星期四；第2对相同的字符是&apos;E&apos;，那是第5个英文字母，代表一天里的第14个钟头（于是一天的0点到23点由数字0到9、

以及大写字母A到N表示）；后面两字符串第1对相同的英文字母&apos;s&apos;出现在第4个位置（从0开始计数）上，代表第4分钟。现给定两对字符串，

请帮助福尔摩斯解码得到约会的时间。
</code></pre><p>输入描述:</p>
<pre><code>输入在4行中分别给出4个非空、不包含空格、且长度不超过60的字符串。
</code></pre><p>输出描述:</p>
<pre><code>在一行中输出约会的时间，格式为“DAY HH:MM”，其中“DAY”是某星期的3字符缩写，即MON表示星期一，TUE表示星期二，WED表示星期三，THU表示星期

四，FRI表示星期五，SAT表示星期六，SUN表示星期日。题目输入保证每个测试存在唯一解。
</code></pre><p>输入例子:</p>
<pre><code>3485djDkxh4hhGE

2984akDfkkkkggEdsb

s&amp;hgsfdk

d&amp;Hyscvnm
</code></pre><p>输出例子:</p>
<pre><code>THU 14:04
</code></pre><p><strong>代码如下：</strong></p>
<pre><code>//字符转ascii码：用charCodeAt();
//ascii码砖字符：用fromCharCode();
//大写字母A 到Z 的值是从65 到90;
//小写a到z 是从91 到 122;

var line1 = readline();
var line2 = readline();
var line3 = readline();
var line4 = readline();

var min_length1 = Math.min(line1.length, line2.length);
var min_length2 = Math.min(line3.length, line4.length);

var results = new Array(undefined, undefined, undefined);
var cnt = 0;

for(var j = 0; j &lt; min_length1; j++)
{
if(line1[j] == line2[j] &amp;&amp; line1[j] &gt;= &apos;A&apos; &amp;&amp; line1[j] &lt;= &apos;Z&apos;)
{
if(results[0] == undefined)
results[0] = line1[j];
}

if(results[0] !== undefined &amp;&amp; line1[j] == line2[j] &amp;&amp; ((line1[j] &gt;= &apos;A&apos; &amp;&amp; line1[j] &lt;= &apos;Z&apos;) || (line1[j] &gt;= &apos;a&apos; &amp;&amp; line1[j] &lt;= &apos;z&apos;) || (line1[j] &gt;= &apos;0&apos; &amp;&amp; line1[j] &lt;= &apos;9&apos;)))
{
if(cnt == 1)
results[1] = line1[j];
cnt++;
}
}

for(var j = 0; j &lt; min_length2; j++)
{
if(line3[j] == line4[j] &amp;&amp; ((line3[j] &gt;= &apos;A&apos; &amp;&amp; line3[j] &lt;= &apos;Z&apos;) || (line3[j] &gt;= &apos;a&apos; &amp;&amp; line3[j] &lt;= &apos;z&apos;)))
{
results[2] = j;
break;
}
}

var str1 = &quot;&quot;;
switch (results[0])
{
case &apos;A&apos;: str1 += &quot;MON &quot;; break;
case &apos;B&apos;: str1 += &quot;TUE &quot;; break;
case &apos;C&apos;: str1 += &quot;WED &quot;; break;
case &apos;D&apos;: str1 += &quot;THU &quot;; break;
case &apos;E&apos;: str1 += &quot;FRI &quot;; break;
case &apos;F&apos;: str1 += &quot;SAT &quot;; break;
case &apos;G&apos;: str1 += &quot;SUN &quot;; break;
}

if(results[1] &gt;= &apos;A&apos; &amp;&amp; results[1] &lt;= &apos;N&apos;)
{
str1 += (results[1].charCodeAt(results[1]) - 65 + 10);
}
else if(results[1] &gt;= &apos;0&apos; &amp;&amp; results[1] &lt;= &apos;9&apos;)
{
str1 += &quot;0&quot; + results[1];
}

if(results[2] &lt; 10)
str1 += &quot;:0&quot; + results[2];
else
str1 += &quot;:&quot; + results[2];

console.log(str1);
</code></pre><ul>
<li><strong>5.【编程题】德才论 (25)</strong></li>
</ul>
<p>题目描述</p>
<pre><code>宋代史学家司马光在《资治通鉴》中有一段著名的“德才论”：“是故才德全尽谓之圣人，才德兼亡谓之愚人，德胜才谓之君子，才胜德谓之

小人。凡取人之术，苟不得圣人，君子而与之，与其得小人，不若得愚人。”

现给出一批考生的德才分数，请根据司马光的理论给出录取排名。
</code></pre><p>输入描述:</p>
<pre><code>输入第1行给出3个正整数，分别为：N（&lt;=105），即考生总数；L（&gt;=60），为录取最低分数线，即德分和才分均不低于L的考生才有资格

被考虑录取；H（&lt;100），为优先录取线——德分和才分均不低于此线的被定义为“才德全尽”，此类考生按德才总分从高到低排序；才分不到

但德分到线的一类考生属于“德胜才”，也按总分排序，但排在第一类考生之后；德才分均低于H，但是德分不低于才分的考生属于“才德兼

亡”但尚有“德胜才”者，按总分排序，但排在第二类考生之后；其他达到最低线L的考生也按总分排序，但排在第三类考生之后。

随后N行，每行给出一位考生的信息，包括：准考证号、德分、才分，其中准考证号为8位整数，德才分为区间[0, 100]内的整数。数字间以空格分隔。
</code></pre><p>输出描述:</p>
<pre><code>输出第1行首先给出达到最低分数线的考生人数M，随后M行，每行按照输入格式输出一位考生的信息，考生按输入中说明的规则从高到低排序。当某类考生中有多人

总分相同时，按其德分降序排列；若德分也并列，则按准考证号的升序输出。
</code></pre><p>输入例子:</p>
<pre><code>14 60 80

10000001 64 90

10000002 90 60

10000011 85 80

10000003 85 80

10000004 80 85

10000005 82 77

10000006 83 76

10000007 90 78

10000008 75 79

10000009 59 90

10000010 88 45

10000012 80 100

10000013 90 99

10000014 66 60
</code></pre><p>输出例子:</p>
<pre><code>12

10000013 90 99

10000012 80 100

10000003 85 80

10000011 85 80

10000004 80 85

10000007 90 78

10000006 83 76

10000005 82 77

10000002 90 60

10000014 66 60

10000008 75 79

10000001 64 90
</code></pre><p><strong>代码如下：</strong></p>
<pre><code>var head_line = readline();
var head_lines = head_line.split(&apos; &apos;);

var all_num = parseInt(head_lines[0]);
var low = parseInt(head_lines[1]);
var high = parseInt(head_lines[2]);

//四档考生，先分完档再在每档内按规则排序
var s1 = new Array();
var s2 = new Array();
var s3 = new Array();
var s4 = new Array();

while(line=readline())
{
var lines = line.split(&apos; &apos;);
var stu_no = parseInt(lines[0]);
var score_de = parseInt(lines[1]);
var score_cai = parseInt(lines[2]);

if(score_de &lt; low || score_cai &lt; low)
continue;

if(score_de &gt;= high &amp;&amp; score_cai &gt;= high)
{
s1.push({stu_no, score_de, score_cai});
continue;
}
if(score_de &gt;= high &amp;&amp; score_cai &lt; high)
{
s2.push({stu_no, score_de, score_cai});
continue;
}
if(score_de &lt; high &amp;&amp; score_cai &lt; high &amp;&amp; score_de &gt;= score_cai)
{
s3.push({stu_no, score_de, score_cai});
continue;
}
s4.push({stu_no, score_de, score_cai})
}

//同档权值相同以后的后续比较规则
var inner_rule = function ({stu_no1, score_de1, score_cai1}, {stu_no2, score_de2, score_cai2}) {
if(score_de1 == score_de2)
{
if(stu_no1 &gt; stu_no2)
return 1;
else
return -1
}
else if(score_de1 &gt; score_de2)
return -1;
else
return 1;
}

//考生的内部排序规则
var compare = function (x, y) {
var stu_no1 = x[&quot;stu_no&quot;];
var score_de1 = x[&quot;score_de&quot;];
var score_cai1 = x[&quot;score_cai&quot;];
var stu_no2 = y[&quot;stu_no&quot;];
var score_de2 = y[&quot;score_de&quot;];
var score_cai2 = y[&quot;score_cai&quot;];
if (score_de1 + score_cai1 == score_de2 + score_cai2) {
return inner_rule({stu_no1, score_de1, score_cai1}, {stu_no2, score_de2, score_cai2});
} else if (score_de1 + score_cai1 &gt; score_de2 + score_cai2) {
return -1;
} else {
return 1;
}
}

s1 = s1.sort(compare);
s2 = s2.sort(compare);
s3 = s3.sort(compare);
s4 = s4.sort(compare);

var result = s1.concat(s2);
result = result.concat(s3);
result = result.concat(s4);

console.log(result.length);

for(var i = 0; i &lt; result.length; i++)
{
console.log(result[i][&quot;stu_no&quot;] + &quot; &quot; + result[i][&quot;score_de&quot;] + &quot; &quot; + result[i][&quot;score_cai&quot;])
}
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/14/1004-1005/" data-id="cjokv5nn4000144rjrh4tcmfv" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-1000-1003" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/13/1000-1003/" class="article-date">
  <time datetime="2018-06-12T16:23:54.000Z" itemprop="datePublished">2018-06-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/js刷题/">js刷题</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/13/1000-1003/">1000-1003</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>##刷题 JavaScript(V8.6.0.0) </p>
<p>题目网站：<a href="https://www.nowcoder.com/pat/6/problems" target="_blank" rel="noopener">https://www.nowcoder.com/pat/6/problems</a> </p>
<p>本人在nodejs环境下自测，你也可以选择 在线自测网站：<a href="http://www.webtoolkitonline.com/javascript-tester.html" target="_blank" rel="noopener">http://www.webtoolkitonline.com/javascript-tester.html</a> </p>
<p>美化/净化/加密/解密/混淆网站：<a href="https://tool.lu/js/" target="_blank" rel="noopener">https://tool.lu/js/</a> </p>
<p>作为js新人，书都还没看完。前两题一次秒过，试了试手，继续加油。</p>
<ul>
<li><strong>1.【编程题】a+b</strong></li>
</ul>
<p>问题描述：</p>
<pre><code>计算a+b的和

每行包行两个整数a和b

对于每行输入对应输出一行a和b的和
</code></pre><p>输入</p>
<pre><code>1 5
</code></pre><p>输出</p>
<pre><code>6
</code></pre><p><strong>代码如下：</strong></p>
<pre><code>while(line=readline()){
    var lines = line.split(&apos; &apos;);
    var a = parseInt(lines[0]);
    var b = parseInt(lines[1]);
    print(a+b);
}
</code></pre><ul>
<li><strong>2.【编程题】A+B和C (15)</strong></li>
</ul>
<p>题目描述</p>
<pre><code>给定区间[-2的31次方, 2的31次方]内的3个整数A、B和C，请判断A+B是否大于C。
</code></pre><p>输入描述:</p>
<pre><code>输入第1行给出正整数T(&lt;=10)，是测试用例的个数。随后给出T组测试用例，每组占一行，顺序给出A、B和C。整数间以空格分隔。
</code></pre><p>输出描述:</p>
<pre><code>对每组测试用例，在一行中输出“Case #X: true”如果A+B&gt;C，否则输出“Case #X: false”，其中X是测试用例的编号（从1开始）。
</code></pre><p>输入例子:</p>
<pre><code>4

1 2 3

2 3 4

2147483647 0 2147483646

0 -2147483648 -2147483647
</code></pre><p>输出例子:</p>
<pre><code>Case #1: false

Case #2: true

Case #3: true

Case #4: false
</code></pre><p><strong>代码如下：</strong></p>
<pre><code>var startNum = parseInt(readline());
var count = 1;

while(line=readline()){
    var lines = line.split(&apos; &apos;);
    var a = parseInt(lines[0]);
    var b = parseInt(lines[1]);
    var c = parseInt(lines[2]);
    print(&quot;Case #&quot; + count + &quot;: &quot; + (a + b &gt; c));
    count ++;
}
</code></pre><ul>
<li><strong>3.【编程题】数字分类 (20)</strong></li>
</ul>
<p>题目描述</p>
<pre><code>给定一系列正整数，请按要求对数字进行分类，并输出以下5个数字：
</code></pre><p>​<br>​<br>    A1 = 能被5整除的数字中所有偶数的和；</p>
<pre><code>A2 = 将被5除后余1的数字按给出顺序进行交错求和，即计算n1-n2+n3-n4...；

A3 = 被5除后余2的数字的个数；

A4 = 被5除后余3的数字的平均数，精确到小数点后1位；

A5 = 被5除后余4的数字中最大数字。
</code></pre><p>输入描述:</p>
<pre><code>每个输入包含1个测试用例。每个测试用例先给出一个不超过1000的正整数N，随后给出N个不超过1000的待分类的正整数。数字间以空格分隔。
</code></pre><p>输出描述:</p>
<pre><code>对给定的N个正整数，按题目要求计算A1~A5并在一行中顺序输出。数字间以空格分隔，但行末不得有多余空格。

若其中某一类数字不存在，则在相应位置输出“N”。
</code></pre><p>输入例子:</p>
<pre><code>13 1 2 3 4 5 6 7 8 9 10 20 16 18
</code></pre><p>输出例子:</p>
<pre><code>30 11 2 9.7 9
</code></pre><p><strong>代码如下：</strong></p>
<pre><code>var line = readline();
var lines = line.split(&apos; &apos;);
var num = parseInt(lines[0]);

var a1_sum = &quot;N&quot;;

var a2_sum = &quot;N&quot;;
var a2_postive = true;  //a2计算是否是正数，true取+，false取-

var a3_cnt = &quot;N&quot;;

var a4_sum = &quot;N&quot;;
var a4_cnt = 0;

var a5_max = &quot;N&quot;;

var length = lines.length;
for(var i = 1; i &lt; length; i++)
{
    var value = parseInt(lines[i]);
    switch (value % 5)
    {
        case 0:
            if(value % 2 == 0)
            {
                if(a1_sum == &quot;N&quot;)
                    a1_sum = value;
                else
                    a1_sum += value;
            }
            break;
        case 1:
            if(a2_sum == &quot;N&quot;)
                a2_sum = 0;
            if(a2_postive)
                a2_sum += value;
            else
                a2_sum -= value;
            a2_postive = !a2_postive;
            break;
        case 2:
            if(a3_cnt == &quot;N&quot;)
                a3_cnt = 0;
            a3_cnt++;
            break;
        case 3:
            if(a4_sum == &quot;N&quot;)
                a4_sum = 0;
            a4_sum += value;
            a4_cnt++;
            break;
        case 4:
            if(a5_max == &quot;N&quot;)
                a5_max = value;
            else
                a5_max = Math.max(a5_max, value);
            break;
    }
}

//强制保留2额外小数，即527.0显示为527.0而不是527。
//如果不需要强制保留的话直接Math.round(x*100)/100;即可
function toDecimal2(x) {
    var f = parseFloat(x);
    var f = Math.round(x*10)/10;
    var s = f.toString();
    var rs = s.indexOf(&apos;.&apos;);
    if (rs &lt; 0) {
        rs = s.length;
        s += &apos;.&apos;;
    }
    while (s.length &lt;= rs + 1) {
        s += &apos;0&apos;;
    }
    return s;
}

var a4_result = &quot;N&quot;;
if(a4_sum !== &quot;N&quot;)
    a4_result = toDecimal2(a4_sum / a4_cnt);

console.log(a1_sum + &quot; &quot; + a2_sum + &quot; &quot; + a3_cnt + &quot; &quot; + a4_result + &quot; &quot; + a5_max);
</code></pre><ul>
<li><strong>4.【编程题】数素数 (20)</strong></li>
</ul>
<p>题目描述</p>
<pre><code>令Pi表示第i个素数。现任给两个正整数M &lt;= N &lt;= 10000，请输出PM到PN的所有素数。
</code></pre><p>​    </p>
<p>输入描述:</p>
<pre><code>输入在一行中给出M和N，其间以空格分隔。
</code></pre><p>输出描述:</p>
<pre><code>输出从PM到PN的所有素数，每10个数字占1行，其间以空格分隔，但行末不得有多余空格。
</code></pre><p>输入例子:</p>
<pre><code>5 27
</code></pre><p>输出例子:</p>
<pre><code>11 13 17 19 23 29 31 37 41 43

47 53 59 61 67 71 73 79 83 89

97 101 103
</code></pre><p><strong>代码如下：</strong></p>
<pre><code>var line = readline();
var lines = line.split(&apos; &apos;);
var m = parseInt(lines[0]);
var n = parseInt(lines[1]);

var results = new Array();
var idx = 0;
var get_result = false;
var cur_num = 2;

while (!get_result)
{
    if(judgePrime(cur_num)) {
        idx++;

        if (idx &gt;= m)
            results[results.length] = cur_num;

        if (idx == n)
            get_result = true;
    }

    cur_num ++;
}

//判断x是否为素数,只处理x为整数的情况
function judgePrime(x) {
    if(x &lt; 2)
        return false;
    for(var i = 2; i &lt;= Math.sqrt(x); i ++)
    {
        if ((x % i) == 0)
            return false;
    }
    return true;
}

var strline = &quot;&quot;;
for(var j = 0; j &lt; results.length; j++)
{
    if(j % 10 == 0)
        strline = results[j];
    else
        strline += &quot; &quot; + results[j];
    if(j % 10 == 9)
    {
        console.log(strline);
        strline = &quot;&quot;;
    }
}
if(strline !== &quot;&quot;)
    console.log(strline);
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/06/13/1000-1003/" data-id="cjokv5nn4000044rj92v4yo4u" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e7-bc-85-e6-80-80" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/25/e7-bc-85-e6-80-80/" class="article-date">
  <time datetime="2018-05-25T14:16:31.000Z" itemprop="datePublished">2018-05-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Uncategorized/">Uncategorized</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/25/e7-bc-85-e6-80-80/">缅怀</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天得到了一个很坏的消息。我的好拍档可能真的回不来了。我的悲伤弥漫到了全身，周围的人事环绕，仿佛完全没有在乎。这世界节奏太快，快到来不及祷告。</p>
<p>我在这思念着我的拍档，寄希望于最后的渺茫，就像能在梦里你回来了，开着玩笑，吃着炸鸡。 一位大牛，公司副总，和大伙有着这许多的情感交织，带来了无限的欢快。为什么呢，为什么呢。</p>
<p>我能理解这样的决定，因为我自己就曾设身处地于那个地步。我能走出来，家人和我的外号占据了大部分因素。我是小强，打不死的小强，越受挫会越激发我的努力。我真希望能分一点这样死皮赖脸的精神给你。。。</p>
<p>我想不通，想不通，多么希望你能够回来。也许是真的倦了，累了，不愿虚与委蛇这个世界。</p>
<p>兄弟，我哭了，我想你回来。相处的时光苦乐交织，未来仍会这样，但我在这里啊。</p>
<p>我会努力，带上你那一份对技术的热爱，继续生活。我的拍档，我的兄弟！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/25/e7-bc-85-e6-80-80/" data-id="cjokv5nnz000f44rjj6ko2s2m" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-e7-bb-b4-e6-8a-a4-e6-96-87-e6-a1-a3" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/12/e7-bb-b4-e6-8a-a4-e6-96-87-e6-a1-a3/" class="article-date">
  <time datetime="2018-05-11T16:32:27.000Z" itemprop="datePublished">2018-05-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Uncategorized/">Uncategorized</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/12/e7-bb-b4-e6-8a-a4-e6-96-87-e6-a1-a3/">维护文档</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>[TOC]</p>
<p>附注：66专指内网发版机器，即192.168.1.66；中心后台特指外网中心后台，即 <a href="http://119.29.73.196/web/admin/index.php" target="_blank" rel="noopener">http://119.29.73.196/web/admin/index.php</a></p>
<h3 id="1-热更代码"><a href="#1-热更代码" class="headerlink" title="1. 热更代码"></a>1. 热更代码</h3><ul>
<li><p>进入66的发版目录，以v1.1.11为例，更新map_actor模块</p>
<pre><code># cd /data/game/
</code></pre></li>
<li><p>找到对应版本号的目录，v1.1.11分支的Android和IOS分别是：android_main_55594_v1.1.11 和 ios_main_55594_v1.1.11</p>
</li>
<li><p>分别进入这两个目录的server目录下，执行map_actor模块同步到外网中心服模板机器</p>
<pre><code># cd /data/game/android_main_55594_v1.1.11/server
# make release_android
# ./scripts/unix/sync_file -u root -h 119.29.73.196 -s androids0 map_actor
</code></pre></li>
</ul>
<pre><code># cd /data/game/ios_main_55594_v1.1.11/server
# make release_ios
# ./scripts/unix/sync_file -u root -h 119.29.73.196 -s ioss0 map_actor
</code></pre><ul>
<li><p>打开外网后台 <a href="http://119.29.73.196/web/admin/index.php" target="_blank" rel="noopener">http://119.29.73.196/web/admin/index.php</a> 进入服务器管理。勾选【页面右上角】所有机器（除去中心后台机），点击同步代码</p>
<p><img src="D:\trunk\trunk\server\doc_img\维护文档11.png" alt="维护文档11"></p>
</li>
<li><p>勾选所有要热更的服务器，点击【页面正上方】同步代码，然后将要热更的模块map_actor填入【热更代码：】文本框中，点击提交</p>
<p><img src="D:\trunk\trunk\server\doc_img\维护文档22.png" alt="维护文档22"></p>
</li>
</ul>
<h3 id="2-热更配置"><a href="#2-热更配置" class="headerlink" title="2. 热更配置"></a>2. 热更配置</h3><ul>
<li><p>进入66的发版目录，以v1.1.11为例，更新配置</p>
<pre><code># cd /data/game/
</code></pre></li>
<li><p>找到对应版本号的目录，v1.1.11分支的Android和IOS分别是：android_main_55594_v1.1.11 和 ios_main_55594_v1.1.11</p>
</li>
<li><p>分别进入这两个目录的server目录下，执行所有模块同步到外网中心服模板机器【注意：热更配置一定要全部更新，因为外网新服启动不会加载配置】</p>
<pre><code># cd /data/game/android_main_55594_v1.1.11/server
# make release_android
# ./scripts/unix/sync_file -u root -h 119.29.73.196 -s androids0 -a 
</code></pre></li>
</ul>
<pre><code># cd /data/game/ios_main_55594_v1.1.11/server
# make release_ios
# ./scripts/unix/sync_file -u root -h 119.29.73.196 -s ioss0 -a 
</code></pre><ul>
<li><p>打开外网后台 <a href="http://119.29.73.196/web/admin/index.php" target="_blank" rel="noopener">http://119.29.73.196/web/admin/index.php</a> 进入服务器管理。勾选【页面右上角】所有机器（除去中心后台机），点击同步代码</p>
</li>
<li><p>勾选所有要热更的服务器，点击【页面正上方】同步代码，然后将要热更的配置填入【热更配置：】文本框中，点击提交</p>
</li>
<li><p>Tips：svn status 和 svn diff 可以帮助确认当前环境的svn状态，避免误写等异常事情</p>
<p>​</p>
</li>
</ul>
<h3 id="3-开通新服"><a href="#3-开通新服" class="headerlink" title="3. 开通新服"></a>3. 开通新服</h3><p>以下面新服为例：</p>
<p><img src="_img/维护文档3-1.png" alt="维护文档3-1"></p>
<ul>
<li><p>打开外网后台 <a href="http://119.29.73.196/web/admin/index.php" target="_blank" rel="noopener">http://119.29.73.196/web/admin/index.php</a> 进入服务器管理，点击添加服务器</p>
<p><img src="_img/维护文档3-2.png" alt="维护文档3-2"></p>
</li>
<li><p>参考最接近的服务器2065，进行配置</p>
<ul>
<li>关于选择几区：每20一区，因此66落在4区</li>
<li>红框为特别注意的地方，IP部分参考前者复制粘贴</li>
</ul>
<p><img src="_img/维护文档3-3.png" alt="维护文档3-3"></p>
<p><img src="_img/维护文档3-4.png" alt="维护文档3-4"></p>
</li>
<li><p>配好保存以后，点击页面正上方【开通新服】，点击页面正上方【清档】</p>
<p><img src="_img/维护文档3-5.png" alt="维护文档3-5"></p>
</li>
<li><p>在实际开服的当天点击【启动服务器】，成功以后，切换服务器运行状态、是否推荐、对外可见</p>
<p><img src="_img/维护文档3-6.png" alt="维护文档3-6"></p>
</li>
<li><p>注意：一定要开服当天才能第一次启动服务器，不然会有脏数据生成！如果没有在开服当天就启动服务器了，注意清除mongodb的该数据库内容</p>
</li>
</ul>
<h3 id="4-更新36、38服"><a href="#4-更新36、38服" class="headerlink" title="4. 更新36、38服"></a>4. 更新36、38服</h3><ul>
<li>36服：线上内容验证服。和外网正在跑的版本一致</li>
<li>38服：周更新内容验证服。是即将上线的版本，在外网的验证服</li>
</ul>
<p>以v1.1.11为例，用android_main_55594_v1.1.11更新38服：</p>
<ul>
<li><p>进入66的发版目录，若目录android_main_55594_v1.1.11不存在，进行以下操作：</p>
<p>A.check out分支代码</p>
<pre><code># cd /data/game
# mkdir android_main_55594_v1.1.11
# cd android_main_55594_v1.1.11
# checksvn.sh branches/mix/important/android_release_20180425_55594_v1.1.11
</code></pre></li>
</ul>
<p>  B.复制server.config保证顺利编译</p>
<pre><code># cd /data/game/android_main_55594_v1.1.11/server
# cp /data/dsgl_new/server/system_config/server.config ./system_config/server.config
</code></pre><ul>
<li><p>进入目录，执行编译，并同步至38服</p>
<pre><code># cd /data/game/android_main_55594_v1.1.11/server
# make debug
# ./scripts/unix/sync_file -u root -h 139.199.187.235 -s DSGLs38 -a
</code></pre></li>
<li><p>进入到139.199.187.235，进行相关操作（加载代码/加载配置/关服/开服等）</p>
<ul>
<li><p>开服/关服</p>
<h1 id="cd-data-game-DSGL-s38-scripts-unix"><a href="#cd-data-game-DSGL-s38-scripts-unix" class="headerlink" title="cd /data/game/DSGL_s38/scripts/unix"></a>cd /data/game/DSGL_s38/scripts/unix</h1><h1 id="s-start"><a href="#s-start" class="headerlink" title="./s start"></a>./s start</h1><h1 id="s-stop"><a href="#s-stop" class="headerlink" title="./s stop"></a>./s stop</h1></li>
<li><p>加载代码/配置&lt;加载10000分钟以内的模块/加载全部配置&gt;</p>
<h1 id="cd-data-game-DSGL-s38-scripts-unix-1"><a href="#cd-data-game-DSGL-s38-scripts-unix-1" class="headerlink" title="cd /data/game/DSGL_s38/scripts/unix"></a>cd /data/game/DSGL_s38/scripts/unix</h1><h1 id="scripts-unix-s-attach-xxx"><a href="#scripts-unix-s-attach-xxx" class="headerlink" title="./scripts/unix/s attach xxx"></a>./scripts/unix/s attach xxx</h1><blockquote>
<p>common_update:reload_mod_modified(common, 10000).<br>common_config:load_all(true).</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<p>  ​</p>
<h3 id="5-IOS提审（专门用于IOS审核，不对玩家开放）"><a href="#5-IOS提审（专门用于IOS审核，不对玩家开放）" class="headerlink" title="5. IOS提审（专门用于IOS审核，不对玩家开放）"></a>5. IOS提审（专门用于IOS审核，不对玩家开放）</h3><ul>
<li><p>在中心后台选择一个空闲的低于50的server_id，如27，进行添加服务器的配置，模板参考20。（一定要配，不然没有充值回调！！！）其中游戏端口填20037，后台端口填9037（即以20010和9010为基数，加上server_id得出结果）其他依葫芦画瓢：</p>
<p><img src="_img/维护文档5-1.bmp" alt="维护文档5-1"></p>
</li>
<li><p>根据要用的版本，去到66的发版目录/data/game下，选择IOS版本相应的目录。</p>
<pre><code># cd /data/game/ios_main_55947_v1.1.12/server
# make release_ios        laolisdk使用make release
# ./scripts/unix/sync_file -u root -h 39.108.192.101 -s IOSs27 -a
</code></pre></li>
</ul>
<p>  ​    </p>
<ul>
<li><p>进入39.108.192.101的对应服务器目录下， 拷贝其他服的server.config到本服，然后进行相应替换。</p>
<pre><code># cd /data/game/IOS_s27
# cp ../IOS_s20/system_config/server.config ./system_config/
# vim system_config/server.config

% 修改以下字段值，注意和第一步配置的相匹配
&gt; {server_no, 27}.
&gt; {serverid,[27]}.
&gt; {line_start_port, 20037}.
&gt; {web_port, 9037}.
&gt; {mongo_config, {&quot;localhost&quot;, 27017, &quot;dsgl27&quot;, &quot;dsgl&quot;, &quot;123456&quot;}}.

# ./scripts/unix/s init_db
# ./scripts/unix/s start

% 将审核用的配置拷贝到本地，attach到游戏服以后，进行这三个表的加载 
# cp -f ~/check_ios_config/v1.1.10/* ./config/iOS/
# ./scripts/unix/s attach xxx
% 这三个表影响审核的一些信息，如果有结构改变就需要调整。
&gt;common_config:load(&apos;RechargeActivity&apos;),common_config:load(&apos;RechargeList&apos;),common_config:load(&apos;PushRules&apos;).

% 修改服务器列表
# cd /data/web_sy/web/api/
# cp server_list_ios20.php server_list_ios27.php
# vim server_list_ios27.php
% 修改其中的server_id为27、game_port为20037端口号
&gt;&apos;server_id&apos; =&gt; &quot;27&quot;
&gt;&apos;game_port&apos; =&gt; 20037

% 地址 http://zhuyougame.com/web/api/server_list_ios27.php
</code></pre></li>
<li><p>【仅针对米壳】修改后台文件pay_mike.php，将炳鸿给的subgameid和pay_key照样拷贝，然后提交到svn更新出去（web_sy更新见下方操作）。【其他平台】自行判断充值是否成功。</p>
<pre><code>% 登陆66
# cd /data/web_sy/
# svn up
# ./sync_file -h 119.29.73.196
</code></pre></li>
</ul>
<pre><code>​
</code></pre><h3 id="6-内网测试服维护"><a href="#6-内网测试服维护" class="headerlink" title="6. 内网测试服维护"></a>6. 内网测试服维护</h3><ul>
<li><p>进入66</p>
<ul>
<li><p>方式一</p>
<h1 id="cd-data-dsgl-new-server"><a href="#cd-data-dsgl-new-server" class="headerlink" title="cd /data/dsgl_new/server"></a>cd /data/dsgl_new/server</h1><h1 id="make-all"><a href="#make-all" class="headerlink" title="make all"></a>make all</h1><h1 id="scripts-unix-s-attach-xx"><a href="#scripts-unix-s-attach-xx" class="headerlink" title="./scripts/unix/s attach xx"></a>./scripts/unix/s attach xx</h1><blockquote>
<p>common_config:load_all(true).</p>
</blockquote>
</li>
<li><p>方式二</p>
<h1 id="cd-data-dsgl-new-server-1"><a href="#cd-data-dsgl-new-server-1" class="headerlink" title="cd /data/dsgl_new/server"></a>cd /data/dsgl_new/server</h1><h1 id="make-debug"><a href="#make-debug" class="headerlink" title="make debug"></a>make debug</h1></li>
</ul>
</li>
</ul>
<ul>
<li><p>如果上述过程中有报错，则排查问题。如果没有报错，但是log有异常，则重启，重启还有问题就清档</p>
<pre><code># ./s drop_mongo
</code></pre></li>
</ul>
<pre><code>​
</code></pre><h3 id="7-导入外网玩家数据"><a href="#7-导入外网玩家数据" class="headerlink" title="7. 导入外网玩家数据"></a>7. 导入外网玩家数据</h3><ul>
<li><p>在192.168.1.6上（内网测试机器2）</p>
<pre><code># cd /home/game/db_backup
</code></pre></li>
<li><p>注意命名格式，dsgl_SERVERID _ 年 _ 月 _ 日</p>
<pre><code># scp -r root@119.29.245.80:/data/DbBackup/2018_05_02/dsgl2001/ ./dsgl_2001_2018_5_2
# mongorestore -d dsl_2001 --dir=./dsgl_2001_2018_5_2/04_40.mongo/dsgl_2001/
</code></pre></li>
<li><p>前提是存在可用的游戏服，修改对应服的server.config： server_no，serverid：为该服的server_id，及数据库导向</p>
<pre><code>{server_no, 2001}.
{serverid, [2001]}.
{mongo_config,{&quot;192.168.1.6&quot;,27017,&quot;dsgl_2001&quot;,&quot;mongouser&quot;,&quot;8f10bb0e5bfb2743&quot;}}.
</code></pre></li>
<li><p>登陆数据库，修改服务器列表：</p>
<pre><code># mysql -u root -h 192.168.1.44 -pminmin

&gt; use dsgl_center;
&gt; update all_server_info set server_id = 2001 where server_id = xx;（xx是可用游戏服的server_id）
</code></pre></li>
</ul>
<pre><code>​
</code></pre><h3 id="8-玩法中心服"><a href="#8-玩法中心服" class="headerlink" title="8. 玩法中心服"></a>8. 玩法中心服</h3><ul>
<li><p>前提是这两个服都能作为游戏服正常启动</p>
</li>
<li><p>修改玩法中心服server.config：</p>
<pre><code>{center_for_activity, true}.
</code></pre></li>
<li><p>修改游戏服使center_server_host和玩法中心服一致&lt;分别对应中心服的server.config的IP和端口&gt;：</p>
<pre><code>{center_server_host, {&quot;192.168.1.40&quot;,20001}}. 
{open_for_cross, true}.
</code></pre></li>
<li><p>注：win下启动中心服脚本使用scripts/win/center_server.bat，linux下启动查看scripts/unix/s</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/12/e7-bb-b4-e6-8a-a4-e6-96-87-e6-a1-a3/" data-id="cjokv5nnk000c44rjb4kxk2g6" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
    <h3 class="widget-title">个人信息</h3>
    <div class="widget">
      <li>历任双端核心开发、主程、创业公司技术合伙人。擅长Erlang。使用Unity3d，Egret。</li>
      <li><a href="https://www.zhihu.com/people/sun-jie-20-20/asks" title="Zhihu">我的知乎</a></li>
      <li><a href="https://teof.github.io/2018/11/17/本博主旨/" title="self">本博主旨</a></li>
    </div>
  </div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Uncategorized/">Uncategorized</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/erlang/">erlang</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/essay/">essay</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/h5刷题/">h5刷题</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js刷题/">js刷题</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/me-i-myself/">me.i.myself</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/11/18/一个游戏人，呵呵/">一个游戏人，呵呵</a>
          </li>
        
          <li>
            <a href="/2018/11/17/本博主旨/">本博主旨</a>
          </li>
        
          <li>
            <a href="/2018/11/16/你好-Hexo/">你好,Hexo</a>
          </li>
        
          <li>
            <a href="/2018/11/14/leetcode-84-e6-9f-b1-e7-8a-b6-e5-9b-be-e4-b8-ad-e6-9c-80-e5-a4-a7-e7-9a-84-e7-9f-a9-e5-bd-a2/">leetcode 84 柱状图中最大的矩形</a>
          </li>
        
          <li>
            <a href="/2018/11/06/e5-a5-bd-e4-b9-85-e6-b2-a1-e5-86-99-e4-ba-86-ef-bc-8c-e7-bb-a7-e7-bb-ad-e5-8a-a0-e6-b2-b9/">好久没写了，继续加油</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 teof<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>